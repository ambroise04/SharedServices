@model ICollection<ServiceTO>
@inject IViewLocalizer Localizer;
@inject UserManager<ApplicationUser> UserManager;

@{
    ViewBag.Title = Localizer["Titre"];

    var services = Model;

    var cultureFR = CultureInfo.CurrentCulture.Name.Contains("fr");
    var culture = (cultureFR) ? CultureInfo.CreateSpecificCulture("fr-FR") : CultureInfo.CreateSpecificCulture("en-US");
}

@section Styles {
    <link href="~/css/register.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="~/css/bootstrap-material-datetimepicker-bs4.min.css" rel="stylesheet" />
    <style>
        .dtp-btn-cancel {
            color: var(--custom-green-color) !important;
        }

        .dtp-btn-ok {
            color: var(--custom-green-color) !important;
        }

        .service-select:focus {
            border-color: #0e9c9c !important;
            box-shadow: 0 0 0 0.2rem rgba(14, 156, 156, .25) !important;
        }

        /*.select-wrapper.md-form.md-outline input.select-dropdown:focus {
            border-color: #4285f4;
            box-shadow: inset 0 0 0 1px #4285f4;
        }*/

        .card {
            box-shadow: none;
        }
    </style>
}
<!-- Start page content -->
<div class="container">
    <div class="row text-center">
        <h2 class="ubuntu-light font-weight-bold  my-4">Publier une demande</h2>
    </div>
    <div class="row my-4 my-md-5">
        <div class="col-12 card loading-content">
            <form autocomplete="off" class="card-body" id="form-request">
                @Html.AntiForgeryToken()
                <input type="hidden" value="" id="lat" name="lat" />
                <input type="hidden" value="" id="lng" name="lng" />
                <div class="row">
                    <div class="col-md-6">
                        <label for="sve">Service</label>
                        <select name="service" id="sve" class="mdb-select md-form md-outline service-select mt-0" searchable="Rechercher...">
                            @foreach (var group in services)
                            {
                                <optgroup label="@group.ServiceGroup.Title (@group.ServiceGroup.PointsByHour points/heure)">
                                    @foreach (var service in group.Services)
                                    {
                                        <option value="@service.Id">@service.Title</option>
                                    }
                                </optgroup>
                            }
                        </select>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group green-border mb-0">
                            <label for="date">Cliquez pour sélectionner la date et l'heure</label>
                            <input type="text" id="date" class="form-control request-date">
                            <input type="hidden" id="dateSubmit" class="form-control request-date" name="date">
                        </div>
                        <small>
                            La date est optionnelle pour certains service. <br />
                            Elle est par contre nécessaire pour d'autres services (Ex: Babysitting)
                        </small>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="row">
                            <div class="col-md-12">
                                <p class="ubuntu-medium">Lieu où le service sera effectué</p><br />
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-md-6">
                                <label for="inputCity">City</label>
                                <input type="text" class="form-control" id="inputCity" name="city">
                            </div>
                            <div class="form-group col-md-4">
                                <label for="inputState">Country</label>
                                <select id="inputState" class="form-control browser-default custom-select ubuntu-light" name="country">
                                    <partial name="/Views/Shared/_Countries.cshtml" />
                                </select>
                            </div>
                            <div class="form-group col-md-2">
                                <label for="inputZip">Postal code</label>
                                <input type="text" class="form-control" id="inputZip" name="postalcode">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row d-flex justify-content-end">
                    <div class="col-md-4">
                        <button class="btn bg-color-green waves-effect form-control white-text" id="btn-submit">Publier</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

@section Scripts{
    <script src="~/js/moment.js"></script>
    <script src="~/js/bootstrap-material-datetimepicker-bs4.min.js"></script>
    <script src="~/js/business/request-multicast.js"></script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBLI9riil_9An2u7RA8zp8wXy0CGRZljvU"></script>
    <script src="~/js/business/google-coordinates.js"></script>


    <script type="text/javascript">
        var lang = "@ViewBag.Culture";
    </script>
}